<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self' 'unsafe-eval'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com; img-src 'self' data: https://crafatar.com https://*.crafatar.com https://textures.minecraft.net https://visage.surgeplay.com https://mc-heads.net;">
    <title>PiErOW Launcher</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/main.css">
    <!-- skinview3d for 3D skin rendering (loaded locally to avoid MIME type issues) -->
    <script src="scripts/skinview3d.bundle.js"></script>
</head>

<body>
    <!-- Custom Titlebar -->
    <div class="titlebar">
        <div class="titlebar-drag">
            <span class="titlebar-title">PiErOW Launcher</span>
        </div>
        <div class="titlebar-controls">
            <button class="titlebar-btn" id="btn-minimize">
                <svg width="12" height="12" viewBox="0 0 12 12">
                    <rect x="1" y="5" width="10" height="2" fill="currentColor" />
                </svg>
            </button>
            <button class="titlebar-btn" id="btn-maximize">
                <svg width="12" height="12" viewBox="0 0 12 12">
                    <rect x="1" y="1" width="10" height="10" fill="none" stroke="currentColor" stroke-width="1.5" />
                </svg>
            </button>
            <button class="titlebar-btn titlebar-btn-close" id="btn-close">
                <svg width="12" height="12" viewBox="0 0 12 12">
                    <path d="M1 1L11 11M11 1L1 11" stroke="currentColor" stroke-width="1.5" />
                </svg>
            </button>
        </div>
    </div>

    <!-- Login View -->
    <div class="view" id="view-login">
        <div class="login-container">
            <div class="login-card">
                <div class="login-logo">
                    <div class="logo-icon">P</div>
                    <h1>PiErOW Launcher</h1>
                    <p>Red Empire Modpack ‚Ä¢ Fabric 1.21.1</p>
                </div>

                <!-- Auth Mode Toggle -->
                <div class="auth-toggle">
                    <button class="auth-toggle-btn active" data-mode="microsoft">
                        <svg width="20" height="20" viewBox="0 0 21 21" fill="currentColor">
                            <path d="M0 0h10v10H0zM11 0h10v10H11zM0 11h10v10H0zM11 11h10v10H11z" />
                        </svg>
                        Microsoft
                    </button>
                    <button class="auth-toggle-btn" data-mode="offline">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                            <circle cx="9" cy="7" r="4" />
                        </svg>
                        Hors-ligne
                    </button>
                </div>

                <!-- Microsoft Login -->
                <div class="auth-form" id="form-microsoft">
                    <p class="auth-info">Connectez-vous avec votre compte Microsoft pour acc√©der √† Minecraft.</p>
                    <button class="btn btn-primary btn-microsoft" id="btn-login-microsoft">
                        <svg width="20" height="20" viewBox="0 0 21 21" fill="currentColor">
                            <path d="M0 0h10v10H0zM11 0h10v10H11zM0 11h10v10H0zM11 11h10v10H11z" />
                        </svg>
                        Se connecter avec Microsoft
                    </button>
                </div>

                <!-- Offline Login -->
                <div class="auth-form hidden" id="form-offline">
                    <p class="auth-info">Entrez votre pseudo pour jouer en mode hors-ligne.</p>
                    <div class="input-group">
                        <input type="text" id="input-username" placeholder="Pseudo" maxlength="16"
                            pattern="[a-zA-Z0-9_]+">
                        <span class="input-hint">3-16 caract√®res, lettres et chiffres uniquement</span>
                    </div>
                    <button class="btn btn-primary btn-offline" id="btn-login-offline" disabled>
                        Jouer en Hors-ligne
                    </button>
                </div>

                <div class="login-status hidden" id="login-status">
                    <div class="spinner"></div>
                    <span id="login-status-text">Connexion en cours...</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Selection View -->
    <div class="view hidden" id="view-profiles">
        <div class="profiles-container">
            <div class="profiles-card">
                <div class="profiles-header">
                    <h1>Choisir un profil</h1>
                    <p>S√©lectionnez un compte pour jouer</p>
                </div>

                <div class="profiles-list" id="profiles-list">
                    <!-- Profiles will be populated here -->
                </div>

                <div class="profiles-actions">
                    <button class="btn btn-secondary btn-add-profile" id="btn-add-profile">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        Ajouter un compte
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main View - NEW MODERN DESIGN -->
    <div class="view hidden" id="view-main">
        <div class="launcher-container">
            <!-- Top Bar -->
            <header class="top-bar">
                <div class="top-left">
                    <div class="logo-small">
                        <span class="logo-text">PiErOW</span>
                    </div>
                </div>
                <nav class="top-nav">
                    <button class="top-nav-btn active" data-tab="home">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
                        </svg>
                        Accueil
                    </button>
                    <button class="top-nav-btn" data-tab="mods">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path
                                d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z" />
                        </svg>
                        Mods
                    </button>
                    <button class="top-nav-btn" data-tab="settings">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="12" cy="12" r="3" />
                            <path
                                d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" />
                        </svg>
                        Param√®tres
                    </button>
                </nav>
                <div class="top-right">
                    <div class="user-profile" id="user-profile">
                        <div class="user-info">
                            <span class="user-name" id="profile-name">Player</span>
                            <span class="user-type" id="profile-type">Hors-ligne</span>
                        </div>
                        <div class="user-avatar-wrapper">
                            <div class="user-avatar" id="profile-avatar">
                                <img src="" alt="" id="profile-avatar-img">
                                <span class="avatar-fallback">?</span>
                            </div>
                            <button class="btn-avatar-change" id="btn-change-avatar" title="Changer l'avatar">
                                <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path
                                        d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z" />
                                    <circle cx="12" cy="13" r="4" />
                                </svg>
                            </button>
                        </div>
                        <button class="btn-logout-small" id="btn-logout" title="D√©connexion">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
                                <polyline points="16 17 21 12 16 7" />
                                <line x1="21" y1="12" x2="9" y2="12" />
                            </svg>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Main Content Area -->
            <main class="main-content">
                <!-- Home Tab -->
                <div class="tab-content active" id="tab-home">
                    <div class="home-layout">
                        <!-- Left: Modpack Selection -->
                        <div class="modpack-section">
                            <h3 class="section-title">S√©lectionner un Modpack</h3>
                            <div class="modpack-grid">
                                <!-- Red Empire Modpack -->
                                <div class="modpack-card active" data-modpack="red-empire">
                                    <div class="modpack-banner">
                                        <div class="modpack-icon">üè∞</div>
                                    </div>
                                    <div class="modpack-info">
                                        <h4>Red Empire</h4>
                                        <span class="modpack-meta">Fabric 1.21.1 ‚Ä¢ 93 mods</span>
                                        <p class="modpack-desc">Aventure, exploration et nouveaux biomes</p>
                                    </div>
                                    <div class="modpack-badge">Actif</div>
                                </div>
                                <!-- Coming Soon -->
                                <div class="modpack-card disabled" data-modpack="coming-soon">
                                    <div class="modpack-banner">
                                        <div class="modpack-icon">üîÆ</div>
                                    </div>
                                    <div class="modpack-info">
                                        <h4>Bient√¥t...</h4>
                                        <span class="modpack-meta">√Ä venir</span>
                                        <p class="modpack-desc">Nouveau modpack en pr√©paration</p>
                                    </div>
                                    <div class="modpack-badge soon">Soon</div>
                                </div>
                            </div>

                            <!-- Recent Updates Section -->
                            <div class="updates-section">
                                <h3 class="section-title">Derni√®res mises √† jour</h3>
                                <div class="updates-list" id="updates-list">
                                    <div class="update-item">
                                        <span class="update-icon">üì¶</span>
                                        <div class="update-content">
                                            <span class="update-name">Terralith 2.5.8</span>
                                            <span class="update-date">Nouveaux biomes ajout√©s</span>
                                        </div>
                                    </div>
                                    <div class="update-item">
                                        <span class="update-icon">üè∞</span>
                                        <div class="update-content">
                                            <span class="update-name">Dungeons Arise 2.1.0</span>
                                            <span class="update-date">Nouvelles structures</span>
                                        </div>
                                    </div>
                                    <div class="update-item">
                                        <span class="update-icon">‚öîÔ∏è</span>
                                        <div class="update-content">
                                            <span class="update-name">Simply Swords 2.0</span>
                                            <span class="update-date">Armes √©quilibr√©es</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Center: Launch Panel -->
                        <div class="launch-panel">
                            <div class="launch-header">
                                <div class="selected-modpack">
                                    <span class="modpack-label">Modpack s√©lectionn√©</span>
                                    <h2 id="selected-modpack-name">Red Empire</h2>
                                </div>
                                <div class="server-status-badge" id="server-status">
                                    <span class="status-indicator online"></span>
                                    <span>En ligne</span>
                                </div>
                            </div>

                            <!-- Console / Progress Log -->
                            <div class="console-panel" id="console-panel">
                                <div class="console-header">
                                    <span class="console-title">Console</span>
                                    <div class="console-stats">
                                        <span id="download-stats"></span>
                                    </div>
                                </div>
                                <div class="console-log" id="console-log">
                                    <div class="console-line ready">
                                        <span class="log-time">[00:00]</span>
                                        <span class="log-text">Pr√™t √† lancer...</span>
                                    </div>
                                </div>
                                <div class="console-progress hidden" id="console-progress">
                                    <div class="console-progress-bar">
                                        <div class="console-progress-fill" id="console-progress-fill"></div>
                                    </div>
                                    <span class="console-progress-text" id="console-progress-text">0%</span>
                                </div>
                            </div>

                            <!-- Launch Button -->
                            <button class="btn-play" id="btn-launch">
                                <div class="btn-play-bg"></div>
                                <svg class="play-icon" width="28" height="28" viewBox="0 0 24 24" fill="currentColor">
                                    <polygon points="5 3 19 12 5 21 5 3" />
                                </svg>
                                <span class="play-text">JOUER</span>
                            </button>
                        </div>

                        <!-- Right: 3D Skin Viewer -->
                        <div class="skin-viewer-section">
                            <h3 class="section-title">Votre personnage</h3>
                            <div class="skin-viewer-container">
                                <div id="skin-viewer-3d" class="skin-viewer-3d"></div>
                                <div class="skin-viewer-controls">
                                    <button class="viewer-control-btn active" id="btn-rotate-skin"
                                        title="Rotation auto">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <path
                                                d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2" />
                                        </svg>
                                    </button>
                                    <button class="viewer-control-btn" id="btn-walk-anim" title="Animation marche">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="5" r="3" />
                                            <path d="M12 8v8m-4 4l4-4 4 4M8 12l-2 2M16 12l2 2" />
                                        </svg>
                                    </button>
                                </div>
                            </div>

                            <!-- Skin Viewer Settings Panel -->
                            <div class="skin-settings-panel">
                                <div class="skin-setting-row">
                                    <label>Zoom</label>
                                    <input type="range" id="skin-zoom" min="0.3" max="2" step="0.1" value="0.9">
                                    <span id="skin-zoom-value">0.9</span>
                                </div>
                                <div class="skin-setting-row">
                                    <label>FOV</label>
                                    <input type="range" id="skin-fov" min="30" max="120" step="5" value="50">
                                    <span id="skin-fov-value">50¬∞</span>
                                </div>
                                <div class="skin-setting-row">
                                    <label>Vitesse rotation</label>
                                    <input type="range" id="skin-speed" min="0.2" max="3" step="0.1" value="1">
                                    <span id="skin-speed-value">1x</span>
                                </div>
                                <div class="skin-setting-row">
                                    <label>Animation</label>
                                    <select id="skin-animation">
                                        <option value="idle">Idle (repos)</option>
                                        <option value="walk">Marche</option>
                                        <option value="run">Course</option>
                                        <option value="none">Aucune</option>
                                    </select>
                                </div>
                            </div>

                            <div class="skin-info">
                                <span class="skin-username" id="skin-username">Chargement...</span>
                                <button class="btn-change-skin-small" id="btn-change-skin-viewer">
                                    Changer le skin
                                </button>
                            </div>

                            <!-- Skin Library -->
                            <div class="skin-library">
                                <div class="skin-library-header">
                                    <span>Mes skins sauvegard√©s</span>
                                    <button class="btn-add-skin" id="btn-save-current-skin"
                                        title="Sauvegarder le skin actuel">+</button>
                                </div>
                                <div class="skin-library-list" id="skin-library-list">
                                    <!-- Saved skins will appear here -->
                                    <div class="skin-library-empty">Aucun skin sauvegard√©</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mods Tab -->
                <div class="tab-content hidden" id="tab-mods">
                    <div class="mods-page">
                        <div class="mods-page-header">
                            <div>
                                <h2>Mods du Modpack</h2>
                                <p class="subtitle">Red Empire ‚Ä¢ 93 mods install√©s</p>
                            </div>
                            <a href="mods-showcase.html" class="btn-view-mods">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" />
                                    <polyline points="15 3 21 3 21 9" />
                                    <line x1="10" y1="14" x2="21" y2="3" />
                                </svg>
                                Voir tous les mods
                            </a>
                        </div>
                        <div class="mods-quick-stats">
                            <div class="quick-stat">
                                <span class="stat-icon">üöÄ</span>
                                <span class="stat-value">4</span>
                                <span class="stat-name">Performance</span>
                            </div>
                            <div class="quick-stat">
                                <span class="stat-icon">üåç</span>
                                <span class="stat-value">8</span>
                                <span class="stat-name">World Gen</span>
                            </div>
                            <div class="quick-stat">
                                <span class="stat-icon">üè∞</span>
                                <span class="stat-value">24</span>
                                <span class="stat-name">Structures</span>
                            </div>
                            <div class="quick-stat">
                                <span class="stat-icon">‚öîÔ∏è</span>
                                <span class="stat-value">4</span>
                                <span class="stat-name">Combat</span>
                            </div>
                            <div class="quick-stat">
                                <span class="stat-icon">üîß</span>
                                <span class="stat-value">18</span>
                                <span class="stat-name">QoL</span>
                            </div>
                            <div class="quick-stat">
                                <span class="stat-icon">üìö</span>
                                <span class="stat-value">25</span>
                                <span class="stat-name">Libraries</span>
                            </div>
                        </div>
                        <div class="featured-mods-section">
                            <h3>Mods phares</h3>
                            <div class="featured-mods-grid">
                                <div class="featured-mod-card">
                                    <span class="mod-emoji">üåç</span>
                                    <div>
                                        <strong>Terralith</strong>
                                        <span>95+ nouveaux biomes</span>
                                    </div>
                                </div>
                                <div class="featured-mod-card">
                                    <span class="mod-emoji">üè∞</span>
                                    <div>
                                        <strong>Dungeons Arise</strong>
                                        <span>Structures √©piques</span>
                                    </div>
                                </div>
                                <div class="featured-mod-card">
                                    <span class="mod-emoji">‚öîÔ∏è</span>
                                    <div>
                                        <strong>Simply Swords</strong>
                                        <span>Armes uniques</span>
                                    </div>
                                </div>
                                <div class="featured-mod-card">
                                    <span class="mod-emoji">üöÄ</span>
                                    <div>
                                        <strong>Sodium + Iris</strong>
                                        <span>Performance + Shaders</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Tab -->
                <div class="tab-content hidden" id="tab-settings">
                    <div class="settings-page">
                        <h2>Param√®tres</h2>

                        <div class="settings-card">
                            <h3>üéÆ Performance</h3>
                            <div class="setting-item">
                                <div class="setting-label">
                                    <span>RAM allou√©e</span>
                                    <span class="setting-hint">Recommand√©: 6-8 Go pour les modpacks</span>
                                </div>
                                <div class="ram-slider-container">
                                    <input type="range" id="ram-slider" class="ram-slider" min="2" max="16" value="4"
                                        step="1">
                                    <span class="ram-display" id="ram-value">4 Go</span>
                                </div>
                            </div>
                        </div>

                        <div class="settings-card">
                            <h3>üìÅ Fichiers</h3>
                            <div class="setting-item">
                                <div class="setting-label">
                                    <span>R√©pertoire du jeu</span>
                                    <span class="setting-path" id="game-path">%APPDATA%\.pierow-launcher</span>
                                </div>
                                <button class="btn-small" id="btn-open-folder">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path
                                            d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z" />
                                    </svg>
                                    Ouvrir
                                </button>
                            </div>
                        </div>

                        <div class="settings-card">
                            <h3>üë§ Apparence</h3>
                            <div class="setting-item skin-setting">
                                <div class="skin-preview-container">
                                    <div class="skin-preview" id="skin-preview">
                                        <img src="" alt="Skin" id="skin-preview-img">
                                        <div class="skin-placeholder">
                                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none"
                                                stroke="currentColor" stroke-width="1.5">
                                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                                                <circle cx="12" cy="7" r="4" />
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                                <div class="skin-actions">
                                    <div class="setting-label">
                                        <span>Skin Minecraft</span>
                                        <span class="setting-hint">Changer votre skin dans le jeu</span>
                                    </div>
                                    <button class="btn-small btn-skin" id="btn-change-skin">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                                            <polyline points="17 8 12 3 7 8" />
                                            <line x1="12" y1="3" x2="12" y2="15" />
                                        </svg>
                                        Changer le skin
                                    </button>
                                    <a href="https://www.minecraft.net/fr-fr/msaprofile/mygames/editskin"
                                        target="_blank" class="btn-small btn-link-skin">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" />
                                            <polyline points="15 3 21 3 21 9" />
                                            <line x1="10" y1="14" x2="21" y2="3" />
                                        </svg>
                                        Modifier sur minecraft.net
                                    </a>
                                </div>
                            </div>
                        </div>

                        <div class="settings-card">
                            <h3>‚ÑπÔ∏è √Ä propos</h3>
                            <div class="about-content">
                                <p><strong>PiErOW Launcher</strong> v1.0.0</p>
                                <p>Red Empire Modpack ‚Ä¢ Minecraft 1.21.1 Fabric</p>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script src="scripts/app.js"></script>
</body>

</html>